<?php
$url = 'http://cdn.imotortimes.com/sites/imotortimes.com/files/styles/large/public/2014/02/21/lamborghini-countach-wolf-wall-street.jpg?itok=NRqFuuHl';
$data = 'iVBORw0KGgoAAAANSUhEUgAAAGUAAAA3CAIAAACaWBNkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAADeJJREFUeNrEm3uQVdWVxn/r3Fe/6IZGQBqabppGmlcgJhiiJMpo8BVmklZiEiKaKKk8y0lZU5nMpMakJqYSi5qaaOJYDpMQjRo1UxOj8UFCEAURMCLKU4R+QUM3r373fZ41f/Tt5tx79jn33uaR+9e95+5zzt5rr/Xtb317bQlaQc7vRwTVkV9JmCO6pTI1Nggjl9XZPvN2zbyuIMMXJfPGkStDLeN0TeGqn7C3lEDKt4cKVvqL+5Fnn2mDlf23VagxTEPM6o26DSgjhlDH4CXzCq6+q+NVYupI5o2ijotqaJ5hETW8MOP2TFsOPaFQ5zL1JY971Hm3ZNpIMv9yG8v4xdlYTdaW9IucbxNB3baQvAakAjrkX1J4xBXqkmoyhNO/vKKSzHh0N3B6qxjaqNH1/Y2lJpsoko5HLdTJCrpBZcTC7mgWk6foWe/wcNTMODU6rPhGiNdPbyOKA/fOxX0KB0A14b3/CpDlYmLyryybquHVYpytQj4WF+fjg9ZqCjdjgIiHu6n3S8X0Ojdout3c5aQKSIa9ZFThlttUqsOP9HIKnyDSPFYaybXQZC0ImitIxfS6s3h/YT9qGLYzMMUUTWSiuNFkkot5SH7O7tPKtXpYuaDv/BBYMyT6R6Wapt09+Tld0stGYmovrsdITvw6R7x33Z4xcHGFoRcAi29IioGOiPGZbtupaTKMTEK9+L1zkEb8yt+Iql6wmwMyxJs0uAlE1tiykgT1ebHfJIkHd5Vse2l+Vhid62mmb6tv4Ix8bEiB7U3TXFimHpAn+eQszrlWV0Lsikcdne/kiZziNb3qMtDQlSgoFEVIwODwX14pt1fMqvfYtAD24xz0+RYncuaP7kxwhI4OwLgIAzGi6A3Xcd3N9HYxeTJbtsiLz5K0iccz+psr78srLxRE/QhcVmQEcwoy5994kqnDKAxCzWS9+x7OnKa+Xo+2cn2jvLpeFy1h1hz+7tPMaqB4jPziJ3S2k4KAmToIudzKZMjsVNzRTLNSNA//ymWsAg0qzpUr6w1JKA1RPY0FC/X21fL7JzjWLi//UX6zjr4e6e1jahUTqvXG5dTU693fkYd+TDDEiU6ChjxcNTPT0zxSSB8MNWWawVGY65y8z+lfKRhTocsbZcJk/vIH66p6jp3BhiR84XM6pUY62vlgL5u3yrat1F5KUTlLrtWaOnn6v+nuJmkTyMXRChSqcn4uLn451csYLLlar7mBmhm88DQ7d6NQEaYvzpgimpupb9BEQtpaCMPYYpqOw3GCcNsdWlLO0SZ5/H9gODbVwQY080XnFVouSr6tLqo5CFcs0s/fRcNsrZ7C5vXYsHCe/dwW/cGP6Y9pXZ0ub9T6mZzup/EW+6VtfO5WgAMHOX1Gr13G4qW66m5U0oTDyHIll8rqJTGZ9C9J49cFRXdnPjTSgxhcOl5vXanz53G8Q373GJ29BCASYdZs3fsuq+60f/ZLgLkL7ClTpblVZ8/X6joB4sqzv+Kb39Nx41i+QpoPs+EvlDn4lwubZISXaaYN1SHhay6xcLiNhWruBPTcMiQdFnNRiEP9TPux56iqlr17Zd878sRaIhCAQwe1o0NamogUAagNMKmKXdtJxHlzI0AxsmGjvPSMJOLScji15r9YfhP9noN0axLqci41DtRDQbEyHuZlFy2E3vnDaQK9/S5mzSNuM9gnD3yfWIpIiCREByUcorpWtm2WIy2Ihdry4h8IBAiFSSZIQjBAMfLIWt55CxFR7O/+O2PLSOXdL/FTh1T99GgX3o8yMDVfPpGEmok6vUGefUrr6iQcTPesuES/uFKvuFInTOTyRfafthEuBhDL/tlajh8D9EcPyu+e4c1X2b0bRYsCfORj8tabxAf4+GJe+TNB0yaQT2fFvAmkXvrXRdVXhz4pdOJ4Zs8mEZMjbWx/nVQQIB5l3Dh5e3Na6//jC7Lzr7Q2c7RVXtso3d309Er7MSorKS0lAcVYr2+QA3tVRatnauUlQ4mUamY27uVk4pHwu3eYXL8urr2SsOATdPcwGNMvrNJZc4nFCIXsh5+0v/odOdQS+Mw1vLeDZMq696uBJXMDn1kmL/4vJ08Gbvg465+3r1qSemgds6bTg06aaq/4ovR0EgkwfxHBYLY0JnkTq5HtUfHTdvRvYC8b5sylv5+KMjZt0L9fQUVEr7pab25k/Hitm64LLpfBmBzcrUuv4fKP8u4BeeQX8tqf9ZqlzGjQ+jnMbNBVX6YkoKu/xXu76OhgIKoz5zJ9MnE/JuGvheWrU58ne4n/FdXhlT6ATq2lv0sb5pFMycGDVM/QxpWA9fM11NTpLV8iXCI73pDXXqW4hDEBBLpO6S2rqJpmPf4oPV32rbczdSwlY+Tg+3pTI8k4M+qw7bMKsvgLb77iGjk2UM4vv/fGySEyUV4sTc1UT1Pb1is/IW0tnDohB/bw6svy7X+yH3tUFy0mFJL3F9vXXicHD1LfIPf/J3MW6EcWUVZi3b3KKh+r1TX0RGlq5vobOd7O6dM0H6I3enap18IF9qz6DHH91POZD2le/ifQn9DSCFNrEKT7jDzwL7SdkBeeZv8eQsimDXr7auIJLSlh2nQOfqANH5KPzaXrNMB7b5NCfvmQlFVwpt/6jx/a4yspLaOkhLHjKYvQaRJO84xK/0TK8SU4Wu1BTCqkevKJoZGkkrJjuy7+pE6egm3L7PkUvURrmxxtoxhaDtB9BixKSmlrJRa1tr+ud32T6KB099B+jAi0NA3tyuvUyTprFgRloE9efp4j7YQ9Sgvy6b4vyXC2t/IS7/PxKe8b1alHd7ZQUixvbLKee1aXr6SyFDvdRVGVnl5OdVAUlqbDOv4SrShn3x76+ujqko6Os3gbhGWNsmO79X9PkbI1PkDUBAb5O5dTOxOyc1JHeys9oFGUkIyieQBpPqwq1NaTsokEWbyUgIVACvuzX9Kqal3wYZ1ardXTuOQSBno5sFtv+rROmaIr72RSJSlIQkO9zvkQ+3dpwxwqKmTfnrRK4d7NNqbNkgNsjXK5ZOB9gSUkBUmJMrJyBaGtXf66QyZVYcVk3157xZetTa/QG2ViBbW1sncnlui0ahnsB9Fv3KvBAKmk7HuHlK2XzZI3tpLAvnUVqtJzRnv7+GC/bN9ICNKVLZkrvwOS0hilpu0l55A0kz6MJJ7ipUefE/Srp56jEIDBmLX2IV19D6WTCBfR00Uogh0l2m3dsYIEpKAyoI130tNNKGDt2sW7+wlCAIohDIOIndKOYzqhinBYnlrL/lZKIEk6tAuZZHFzevXLHy8KX3VOexFseI2tG0mmNGTptdfbDz/BxEq6IBIgBCEoKScRlxMnCIQJBwhBqVASYABi6I9+qF/5FtXTJJ6SlsPy9JNEhj1IMqPMY+Pa6XTqRSw4S/rFV1+VC1cYABCHhql6xdV8dJGWlMjWTXR22P+2xnr05zTt0a99g95B/dSNuvRT8u4uqqbYfSetx9dRXSe/eYQzvfr1e3TGbPntOvu2O2n8vDQfYv58tu0Ywi/VzNIaNYGUKWdyGyCNKy6bXhQ92plwBOBEt5w+pv398vZbEh2gtVWX3WyveVAeuF+X/QMS5GSn9eQ6Oo9pbb1Mr9PbVlNZyab1+t2v6OJPWutfJhCR93ZJpJhYnI6TZ7eLsrYgfTiP5KjJ0bz1Cb2wgRmAaK/cd6+s+QHz5qralJdTVSWHmvTe7xNLyCvPSfP7JJIcbZFEXJrb5Jlfs3Obfu9+SSKDg1SUUV7BtFpef0W+fQetTYTSIS85EjPvVU08ihDcDc9/PblLkkjXkwcc6JCCAbi0TO97UOsvk85OHTeWYFDnzaOvT+wU4WI6j1FeoZEiBvsZO45TZ8RO0dnBhEn0dFlfu439LURI01Qg4aonzxtazFXlJucJjspJCvNBEdf+YwBKoTfKof0S66OqlkgRajMQZcwYTdqIUDsDtSU6qFNqSCWkPElbG5ZF+xGiMYIhwhA27XEUtiJ6x5SpOj9YwKBVTbnp6NIpUCgr02XL9colgPXYWjra6T5Jcbn128fZ8icswYYxpfqvP1Vb5VQnp0/Z//jPAPGEPnGZ7P8gu8Kc7DXR0Muc+OX4rqPff1T1lXWHLeVvLM3kk71d1pr7dPZCdm6VXW8RTcjChQTL6Gih5QgW2FAalLUPC8obG+lPBJ5/Rq9cyqkTsmVz2rkcHcngEwI+c+cuf1YTZXVFpQu/zoVOmJwrjV/jUmNDYLs0k8HhixGwIAYWWBAYbmAPE9EQWDA4fHuxqzZyCL9+yt5iAranIJM9y/7DdTldsLDl0T/c1BswjBCjUJTJlSImJS/suLHYY+Ylx+6h1zA1/8SvMH4/tFar5tXMiPfqrcV61aOqAZL8NFL1xjLvlEP8tYTc9auj2YL0aaaGXNI9ePEQhcUVVs4DHZl1ZJK/kqKZiTTe+yPndj7t3Pi9F/y7D30Yq1vVV303HiHyspj4vsv7+8Wwl0jmToS4xADN+7gPfpsUxpOMeRJR81mK0ePXuW8aeem/WQ6iHrRTvcFGcyeP4k2EClJ/Lu7+YxZy+Zx1cRfZezmC18FJzcWR8jkS4lpPghfYNrk6pN5t1Ptf9X2muys5SaV6zKhr+bXMPGA0BUySu0NZLEk8XMMLd41nmSVbYs9xuMP1fL9VVbOLYy0zDxhNoY6OxspioldGLq4uw41iX5Y8km3xcxsrL8/O0xCqubiOx9Fr8YhHch2DMZID4zMxJIyGZ7hLzTNx8P8HACiyXJyajqwyAAAAAElFTkSuQmCC'; 
	

// Create a blank image and add some text
/*
$image = imagecreatetruecolor(1200,500);
$text_color = imagecolorallocate($image, 69, 131, 236);
*/

//imagestring($image, 24, 50, 50,  'Hello Wordld..!', $text_color);

// Set the content type header - in this case image/jpeg
//header('Content-Type: image/jpeg');

// Output the image
//imagejpeg($image);

// Free up memory
//imagedestroy($image);

//var_dump($image);
//var_dump($text_color);

function pixelfuck($url, $chars='ewk34543ยงGยง$ยง$Tg34g4g', $shrpns=1, $size=4,$weight=2)
{
    list($w, $h, $type) = getimagesize($url);
    $resource = imagecreatefromstring(file_get_contents($url));
    $img = imagecreatetruecolor($w*$size,$h*$size);

    $cc = strlen($chars);
    for($y=0;$y <$h;$y+=$shrpns)
        for($x=0;$x <$w;$x+=$shrpns)
            imagestring($img,$weight,$x*$size,$y*$size, $chars{@++$p%$cc}, imagecolorat($resource, $x, $y));
    return $img;
}
/*
$url = 'http://upload.wikimedia.org/wikipedia/commons/b/be/Manga_Icon.png';

$text = 'lamborghini-countach-wolf-wall-street?';

header('Content-Type: image/png');
imagepng(pixelfuck($url, $text, 1,7));
*/
function ak_img_thumb($target, $newcopy, $w, $h, $ext) {
    list($w_orig, $h_orig) = getimagesize($target);
    $src_x = ($w_orig / 2) - ($w / 2);
    $src_y = ($h_orig / 2) - ($h / 2);
    $ext = strtolower($ext);
    $img = "";
    if ($ext == "gif"){ 
    		$img = imagecreatefromgif($target);
    } else if($ext =="png"){ 
	    $img = imagecreatefrompng($target);
    } else { 
	    $img = imagecreatefromjpeg($target);
    }
    $tci = imagecreatetruecolor($w, $h);
    imagecopyresampled($tci, $img, 0, 0, $src_x, $src_y, $w, $h, $w, $h);
    if ($ext == "gif"){ 
        imagegif($tci, $newcopy);
    } else if($ext =="png"){ 
        imagepng($tci, $newcopy);
    } else { 

        imagejpeg($tci, $newcopy,100);
    }
}
//echo $url;

function resize($source_image, $destination, $tn_w, $tn_h, $quality = 100, $wmsource = false)
{
    $info = getimagesize($source_image);
    $imgtype = image_type_to_mime_type($info[2]);
    #assuming the mime type is correct
    switch ($imgtype) {
        case 'image/jpeg':
            $source = imagecreatefromjpeg($source_image);
            break;
        case 'image/gif':
            $source = imagecreatefromgif($source_image);
            break;
        case 'image/png':
            $source = imagecreatefrompng($source_image);
            break;
        default:
            die('Invalid image type.');
    }

    #Figure out the dimensions of the image and the dimensions of the desired thumbnail
    $src_w = imagesx($source);
    $src_h = imagesy($source);


    #Do some math to figure out which way we'll need to crop the image
    #to get it proportional to the new size, then crop or adjust as needed

    $x_ratio = $tn_w / $src_w;
    $y_ratio = $tn_h / $src_h;

    if (($src_w <= $tn_w) && ($src_h <= $tn_h)) {
        $new_w = $src_w;
        $new_h = $src_h;
    } elseif (($x_ratio * $src_h) < $tn_h) {
        $new_h = ceil($x_ratio * $src_h);
        $new_w = $tn_w;
    } else {
        $new_w = ceil($y_ratio * $src_w);
        $new_h = $tn_h;
    }

    $newpic = imagecreatetruecolor(round($new_w), round($new_h));
    imagecopyresampled($newpic, $source, 0, 0, 0, 0, $new_w, $new_h, $src_w, $src_h);
    $final = imagecreatetruecolor($tn_w, $tn_h);
    $backgroundColor = imagecolorallocate($final, 255, 255, 255);
    imagefill($final, 0, 0, $backgroundColor);
    //imagecopyresampled($final, $newpic, 0, 0, ($x_mid - ($tn_w / 2)), ($y_mid - ($tn_h / 2)), $tn_w, $tn_h, $tn_w, $tn_h);
    imagecopy($final, $newpic, (($tn_w - $new_w)/ 2), (($tn_h - $new_h) / 2), 0, 0, $new_w, $new_h);

    #if we need to add a watermark
    if ($wmsource) {
	    
        #find out what type of image the watermark is
        $info    = getimagesize($wmsource);
        $imgtype = image_type_to_mime_type($info[2]);

        #assuming the mime type is correct
        switch ($imgtype) {
            case 'image/jpeg':
                $watermark = imagecreatefromjpeg($wmsource);
                break;
            case 'image/gif':
                $watermark = imagecreatefromgif($wmsource);
                break;
            case 'image/png':
                $watermark = imagecreatefrompng($wmsource);
                break;
            default:
                die('Invalid watermark type.');
        }

        #if we're adding a watermark, figure out the size of the watermark
        #and then place the watermark image on the bottom right of the image
        $wm_w = imagesx($watermark);
        $wm_h = imagesy($watermark);
        imagecopy($final, $watermark, $tn_w - $wm_w, $tn_h - $wm_h, 0, 0, $tn_w, $tn_h);

    }
    if (imagejpeg($final, $destination, $quality)) {
        return true;
    }
    return false;
}

////////////////
//resize('watermark.png', 'watermark.png', 200, 200,100);
//resize('image.jpg', 'out.jpg', 1000, 1000,100,false);
//resize('image.jpg', 'out1.jpg', 1000, 500,100,false);
//ak_img_thumb('image.jpg','new.jpg',250,500,'jpg');

function getImage($data){
	$data = base64_decode($data);
	
	$im = imagecreatefromstring($data);
	
	if ($im !== false) {
	   
	    header('Content-Type: image/png');
	    imagepng($im);
	}else {
	    echo 'An error occurred.';
	}	
}
if( isset($_GET['image']) && $_GET['image']==1){ getImage($data); }
?>
<img src="image.php?image=1">
